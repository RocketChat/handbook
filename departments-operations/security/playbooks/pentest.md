# Pentest

## Internal pentest

For pentesting, we use OWASP ZAP. OWASP ZAP is a Proxy server that allows for testing against common web application vulnerabilities. The relevant GDrive folder is [here](https://drive.google.com/drive/folders/1-3vERUvdNxrQsRM59RGoJN5bIIdT\_HYh?usp=sharing).

We use the following process:

* Install the most recent version of OWASP ZAP on a local machine. Get it from the website.
* Set up a test instance of Rocket.Chat with all features enabled with the most recent version
* Use persistent session in OWASP ZAP
* Analyze --> Scan Policy: Import the "basic scan" and "selected Features" policies from GDrive
* Perform an automated scan using traditional and ajax spider
* Remove non-rocket.chat domains (e.g. gstatic) from the scope
* Perform an automated scan using both scan policies
* Now perform a manual scan: log in using both a standard user and an admin account created in the test instance and explore. Focus exploration on newly added or recently changed features.
* Perform another automated scan using both scan policies
* End the scan activities
* Create a PDF export and an HTML exports of the alerts. The PDF export is easier to read and open, but does not contain all fields. This is a problem with ZAP.
* Export the current session of OWASP. Watch out, the file size can be several GB.
* Store both reports in GDrive with an indicator of the date the scans were performed.
* Go into Clickup and check all findings (except informative ones) against existing or past Clickup tasks. Search for the tag "pentest".
* Add new tasks for new findings. Re-open closed tasks for findings that keep re-occuring even though they were closed in Clickup already. Do not open a new task for closed tasks that have a comment regarding acceptance of the vulnerability.
* Provide an overview of the recent scan in the #security channel in RC.

###

## External pentest

External pentesting is performed by an independent company. Each pentest is based on a specific engagement description, which outlines the test procedures and scope of the testing. External pentesting must produce a report with identified vulnerabilities in a shareable format to customers and other stakeholders. All vulnerabilities identified in the pentest must be mitigated before the report is shared with external stakeholders.

